---
title: 一些谜题
date: 2017-12-22 21:21:56
tags:
- algorithm
category: programming
cover: puzzle.jpg
---

来自《算法设计与分析基础》（第三版）和一些不知道在哪看到的谜题。还有一些在[这里](https://xingdl2007.gitbooks.io/introduction-to-the-design-and-analysis-of-algori/content/)。

##### 欧几里德游戏

一开始，板上写有两个不相等的正整数。两个玩家交替写数字，每一次，当前玩家都必须在板上写出任意两个板上数字的差，而且这个数字必须是新的，也就是说，不能与板上任何一个已有的数字相同。当玩家再也写不出新数字时，他就输了。请问，你是选择先行动还是后行动？

---

答：假设m，n为最开始的两个正整数，其中m为较大的那个;

`N = m/gcd(m,n)`
如果`N`为偶数，则后行动；若为奇数，则先行动；通过观察可以发现，所有写出的数字，均为`gcd`的整倍数，从`1`到`m/gcd`，因此，不难推出上述结论。

##### 带锁的门

在走廊上有`n`个带锁的门，从`1`到`n`依次编号。最初所有的门都是关着的。我们从门前经过`n`次，每一次都从`1`号门开始。在第`i`次经过时`（i=1,2,..,n)`我们改变i的整数倍号锁的状态：也就是说如果门是关着的，就打开它；如果门是打开的，就关上它。举例来说，第一次经过之后，所有的门都是打开的；第二次经过时，我们只改变偶数门的状态（`2`号门，`4`号门，`……`）这样一来，第二次经过之后，偶数门是关着的，而奇数门是开着的；第三次经过时，我们把`3`号门关上（该门在第一次经过时被打开），打开`6`号门（该门在第二次经过时被关上），以此类推。在最后一次经过后，哪些门是打开的，哪些是关上的？有多少打开的门？

---

答：对于`i`门，如果它没有整数的平方根`（1,4,9…）`，那它必然会有偶数个因子，所以在经过`n`次后，总是保持最初的状态；而对于`1,4,9`这样的门，只有奇数个因子，所以会在最后保持打开的状态；因此，总共有`int(sqrt(n))`(下取整，根号`n`)个门是打开的状态，其他均为关闭的状态。

两个应用欧几里德以及扩展算法的例子，参考了下面的文章：

http://blog.sina.com.cn/s/blog_7064e7850100yeu1.html
http://blog.csdn.net/dream_ysl/article/details/6683314


##### 狮子和人过河

`3`个人和`3`头狮子站在河的一边，要用一条船把他们运送到河对岸去，但是船每次只能运送两件物体（人或狮子）。不能让留在岸边的狮子比人多，两岸皆然，因为那样狮子会吃人。你该怎么送他们过河呢？

---

答：根据题目的限制进行分析，另外狮子是不会划船的，需要人来划船。

- 首先`1`人，`1`狮子,坐船到对岸；
- 人回来，此时人只能再带`1`狮子到对岸，否则会有人被吃掉；
- 人回来，此时对岸有`2`狮子，若再带狮子过去，则无法完成任务；因此人只能带`1`人过去，此时对岸有`2`人，`2`狮子；
- 此时，只能`1`人，`1`狮子回来，否则两边有人被吃掉（关键步骤）；
- 人再将`1`人送到对岸，此时只剩下`2`狮子留在原地；
- 人再来回两次，每次不上岸，直接接上狮子从到对岸；

经过以上的步骤，`3`人和`3`狮子成功的过了河。这个过程的关键点是`d`，如果在`b`之后，还选择将狮子带到对岸，则会进入死胡同。所以在将`2`个狮子送到对岸后，只能再带两个人过去，这时唯一的选择，就是再带一个狮子回来，似乎是做了无用功，但是这一点对整个问题的解决至关重要。

##### 用沙漏计时

用一个能计时`4`分钟的沙漏和能计时`7`分钟的沙漏，精确计时`9`分钟。

---

答：这个问题的关键是要精确的计时`1`分钟，因为我们有可以计时`4`分钟的沙漏，使用它计时两次，然后再加上`1`分钟，就完成了精确计时`9`分钟的目标。另外，我们还有`7`分钟的沙漏，而`4 * 2 - 7 = 1`启发我们去构造1分钟的沙漏。

- 将`4`分钟、`7`分钟的沙漏同时开始计时；
- 待`4`分钟沙漏结束后，立即翻转；`7`分钟的沙漏不动；
- 待`7`分钟的沙漏结束后，立即翻转；`4`分钟的沙漏不动；
- 待`4`分钟沙漏结束后，将两个沙漏同时翻转；
- `7`分钟沙漏结束后，即完成了`9`分钟的精确计时

另外还有其他的方法，但是此方法可以不需要等待，直接开始计时，关键点是将`1`分钟的时间复制到`7`分钟的沙漏中去。

##### 扑克牌

在一个黑暗的房间，有人塞给你一叠牌，有`N`张面朝上，其余的面朝下。你看不见牌，怎么才能把牌分成两堆，让每堆面朝上的牌数目相同呢？

---

答：注意题目中并没有说要两堆包含相同数目的牌，而只是说要面朝上的牌数目相同，甚至不是`N/2`。
假设第一推有`M`张牌，其中有`a`张朝上，一共有`A`张牌。由于黑暗，我们能够做的操作仅仅是将牌进行翻转，因此共有三种情况。

>case A:
>第一堆: `a`
>第二堆: `N - a`

>case B:
>第一堆: `M - a`
>第二堆: `N - a`

>case C:
>第一堆: `a`
>第二堆: `A - M - N + a`

- 对于第一钟情况，无法得到可操作的方案。
- 第二种情况，若要使`M - a = N - a`显然，`M = N`，因此我们只需要输出N张牌，然后将其翻转，那么就获得了两堆牌并且包含相同数目的面朝上的牌。
- 第三种情况，则要求`A - M - N = 0`即 `M + N = A`和第二种情况本质上一致，即输出`A - N`张后，将剩余的翻转。

##### 箱子选择

有`3`口箱子，一口箱子里面装有贵重的奖品，另外两口箱子是空的。你可以选择一口箱子，但兵不告诉你里面是否有奖品。相反，人们打开了你没选的那两口箱子之一，里面是空的。你可以保留最初选中的箱子（留），或者换另外一口没有打开的箱子（换）。你会怎么做，“留”还是“换”？

---

答：这个问题非常有迷惑性，因为在题目中有故意隐含的信息，大多数人都会忽略这一点。那就是，人们打开了你没选的那两口箱子之一，这样的选择是故意的，还是随机的。不同的选择会影响正确的选择，根据题目的设定，往往是“故意的”。

因此，如果打开空箱子的人知道奖品在哪个箱子中，而故意打开没有奖品的哪个，这就大大增加了第三个箱子中有奖品的概率。因此，选择“换”就是比较明智的了。

从概率的角度来分析，如果打开空箱子的选择是随机的，那么无论选择“留”还是“换”，拿到奖品的概率均由原来的`1/3`上升到了`1/2`；如果打开是空箱子的选择行为时故意的，如果选择“留”，那么拿到奖品的概率是`1/3`，而如果选择“换”，其概率为`2/3`。

从上面的分析可以看出，无论打开空箱子的选择行为时随机的还是故意的，选择“换”箱子都会有最大的概率拿到奖品。

##### 找出跑的最快的三匹马

你有`25`匹马，需要多少场比赛才能找出跑的最快的`3`匹马？你没有秒表，每场比赛只能同时让`5`匹马参赛。

---

答：首先，容易想到的是将`25`匹马分成`5`组，每组进行一轮比赛，选出各组的第一名，然后再让这`5`个第一名进行一次比赛。如果你认为这样就可以选出前三名，那就错了。因为你忽略了一个重要问题：本小组的第一名，一定会比其他组所有马跑的都快吗？这显然是不成立的。

因此正确的做法是这样的：

- 将`25`匹马分成`5`组，进行比赛，同时记录每组马的名次，一共要进行`5`场；
- 将`5`组的头名再进行一场比赛，可以选出跑的最快的马，此阶段要进行`1`场比赛；
- 将上一轮中选出的最快的马牵走，用它所在组的第二名代替进行比赛，即可选出第二名，此阶段要进行1场比赛；
- 同上，可选出最快的第三匹，此阶段要进行1场比赛；

因此，需要进行`5 + 1 + 1 + 1 = 8`场比赛，才能找出跑的最快的三匹马。

##### 快速找到对应的电线

一幢大楼的底层有`1001`根电线，这些电线一直延伸到大楼楼顶，你需要确定底层的`1001`个线头和楼顶的`1001`次线头的对应关系。你有一个电池，一个灯泡，和许多很短的电线，你需要上下楼几次才能确定电线接头的对应关系。

---

答：这个问题只问需要上下楼几次，而不关心时间的问题，因此我们只要给出理论值即可，不用考虑是否高效。
假设人初始在楼下：

- 首先将`1001`根电线`2`个一组，使用短线连接起来，这样会有单独的一根；
- 接着上楼，使用电池和灯泡组成电路，将所有能将灯泡点亮的电线归为一组，并且放好，唯一不能和其他组成电路的电线被找到，即确认了一根电线；同时将此确认的电线和其他分好组的其中一组中的某根进行相连，然后下楼。在摆放电线时，顺序非常重要，可以将待确认电线，放在已确认电线的一侧，方便标记。
- 到楼下后，将所有的连接好的分组断开，但要保持其分组关系。然后使用电池和灯泡，将已经确认的那根电线和其他任意的电线相连，找到能够点亮灯泡的那个分组，这样就可以确认两外的两条电线了。接着在再将已经确认的三条电线，分别与其他待确认的`3`组中的其中一根相连，然后上楼。
- 将已经确认的电线断开，分别使用已经确认的`3`条电线找到其他可点亮灯泡的电线，这样就可以再确认`3`组。
- 重复以上过程，直到确认所有电线的连接关系。

从以上分析过程可看出，这个是一个等比数列，上下楼一趟可确认的电线数目分别为`1、3、9、27…`，而`3^6 = 729，3^7 = 2187`可知，至少要上下楼`7`才能确认所有的`1001`根电线接头的对应关系。在这种方法中，非常依赖电线摆放的顺序，楼上楼下电线的拜访规则要保持一致，这样连接关系才能得到确认。